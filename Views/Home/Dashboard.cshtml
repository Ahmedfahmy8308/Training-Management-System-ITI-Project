@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="dashboard-header mb-5 animate-fade-in-up">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h1 class="display-5 fw-bold text-gradient-primary">
                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
            </h1>
            <p class="lead text-muted">Welcome back, <strong>@ViewBag.UserName</strong>! ðŸ‘‹ Here's your system overview.</p>
        </div>
        <div class="col-md-4 text-end">
            <span class="badge badge-lg bg-gradient-primary shadow-enhanced">
                <i class="fas fa-user-circle me-1"></i>@ViewBag.UserRole
            </span>
        </div>
    </div>
</div>

<!-- System Statistics -->
<div class="row g-4 mb-5">
    <div class="col-lg-3 col-md-6 animate-fade-in-up">
        <div class="stats-card border-radius-lg h-100">
            <div class="card-body p-4">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <div class="dashboard-icon">
                            <i class="fas fa-book"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="stats-number">@ViewBag.TotalCourses</h2>
                        <p class="text-muted mb-0 fw-bold">Total Courses</p>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0 p-4 pt-0">
                <a href="@Url.Action("Index", "Courses")" class="btn btn-gradient-primary btn-sm shadow-enhanced">
                    <i class="fas fa-eye me-1"></i>View Courses
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 animate-fade-in-up">
        <div class="stats-card border-radius-lg h-100">
            <div class="card-body p-4">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <div class="dashboard-icon" style="background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="stats-number text-success">@ViewBag.TotalSessions</h2>
                        <p class="text-muted mb-0 fw-bold">Active Sessions</p>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0 p-4 pt-0">
                <a href="@Url.Action("Index", "Sessions")" class="btn btn-gradient-success btn-sm shadow-enhanced">
                    <i class="fas fa-eye me-1"></i>View Sessions
                </a>
            </div>
        </div>
    </div>
                            <i class="fas fa-calendar-alt fa-2x"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="fw-bold mb-0">@ViewBag.TotalSessions</h2>
                        <p class="text-muted mb-0">Total Sessions</p>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="@Url.Action("Index", "Sessions")" class="btn btn-outline-success btn-sm">
                    <i class="fas fa-eye me-1"></i>View Sessions
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <div class="stat-icon bg-info text-white rounded-circle">
                            <i class="fas fa-users fa-2x"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="fw-bold mb-0">@ViewBag.TotalUsers</h2>
                        <p class="text-muted mb-0">Total Users</p>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                @if (ViewBag.UserRole == "Admin" || ViewBag.UserRole == "SuperAdmin")
                {
                    <a href="@Url.Action("ManageUsers", "Account")" class="btn btn-outline-info btn-sm">
                        <i class="fas fa-eye me-1"></i>Manage Users
                    </a>
                }
                else
                {
                    <a href="@Url.Action("Index", "Users")" class="btn btn-outline-info btn-sm">
                        <i class="fas fa-eye me-1"></i>View Users
                    </a>
                }
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <div class="stat-icon bg-warning text-white rounded-circle">
                            <i class="fas fa-chart-line fa-2x"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="fw-bold mb-0">@ViewBag.TotalGrades</h2>
                        <p class="text-muted mb-0">Total Grades</p>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="@Url.Action("Index", "Grades")" class="btn btn-outline-warning btn-sm">
                    <i class="fas fa-eye me-1"></i>View Grades
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Role-based Quick Actions -->
<div class="row g-4">
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-transparent">
                <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.UserRole == "SuperAdmin")
                {
                    <div class="row g-3">
                        <div class="col-md-6">
                            <a href="@Url.Action("Register", "Account")" class="btn btn-primary w-100">
                                <i class="fas fa-user-plus me-2"></i>Create New User
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("ManageUsers", "Account")" class="btn btn-outline-primary w-100">
                                <i class="fas fa-users-cog me-2"></i>Manage All Users
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Courses")" class="btn btn-success w-100">
                                <i class="fas fa-plus me-2"></i>Create Course
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Sessions")" class="btn btn-outline-success w-100">
                                <i class="fas fa-calendar-plus me-2"></i>Schedule Session
                            </a>
                        </div>
                    </div>
                }
                else if (ViewBag.UserRole == "Admin")
                {
                    <div class="row g-3">
                        <div class="col-md-6">
                            <a href="@Url.Action("Register", "Account")" class="btn btn-primary w-100">
                                <i class="fas fa-user-plus me-2"></i>Create User
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Courses")" class="btn btn-success w-100">
                                <i class="fas fa-plus me-2"></i>Create Course
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Sessions")" class="btn btn-outline-success w-100">
                                <i class="fas fa-calendar-plus me-2"></i>Schedule Session
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Grades")" class="btn btn-warning w-100">
                                <i class="fas fa-star me-2"></i>Record Grade
                            </a>
                        </div>
                    </div>
                }
                else if (ViewBag.UserRole == "Instructor")
                {
                    <div class="row g-3">
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Courses")" class="btn btn-success w-100">
                                <i class="fas fa-plus me-2"></i>Create Course
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Sessions")" class="btn btn-outline-success w-100">
                                <i class="fas fa-calendar-plus me-2"></i>Schedule Session
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Create", "Grades")" class="btn btn-warning w-100">
                                <i class="fas fa-star me-2"></i>Record Grade
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Index", "Courses")" class="btn btn-outline-info w-100">
                                <i class="fas fa-book me-2"></i>My Courses
                            </a>
                        </div>
                    </div>
                }
                else
                {
                    <!-- Trainee Actions -->
                    <div class="row g-3">
                        <div class="col-md-6">
                            <a href="@Url.Action("Index", "Courses")" class="btn btn-primary w-100">
                                <i class="fas fa-book me-2"></i>View Courses
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Index", "Sessions")" class="btn btn-outline-primary w-100">
                                <i class="fas fa-calendar me-2"></i>My Sessions
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("TraineeGrades", "Grades")" class="btn btn-success w-100">
                                <i class="fas fa-chart-line me-2"></i>My Grades
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("Profile", "Account")" class="btn btn-outline-success w-100">
                                <i class="fas fa-user me-2"></i>My Profile
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-transparent">
                <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>System Information</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <small class="text-muted">Platform Version</small>
                    <div class="fw-bold">Training Management System v2.0</div>
                </div>
                <div class="mb-3">
                    <small class="text-muted">Your Role</small>
                    <div class="fw-bold">@ViewBag.UserRole</div>
                </div>
                <div class="mb-3">
                    <small class="text-muted">Last Login</small>
                    <div class="fw-bold">@DateTime.Now.ToString("MMM dd, yyyy 'at' hh:mm tt")</div>
                </div>
                <hr>
                <div class="d-grid">
                    <a href="@Url.Action("Profile", "Account")" class="btn btn-outline-secondary">
                        <i class="fas fa-user me-2"></i>View Profile
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .stat-icon {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .dashboard-header {
        padding: 2rem 0;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 10px;
        margin: -1rem -1rem 2rem -1rem;
        padding-left: 2rem;
        padding-right: 2rem;
    }
    
    .card {
        transition: transform 0.2s ease-in-out;
    }
    
    .card:hover {
        transform: translateY(-2px);
    }
</style>
